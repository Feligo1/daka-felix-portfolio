<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel | Certificates Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* All the same CSS styles from your original code */
        /* ... (copy all the CSS styles from above) ... */
        
        /* Admin-specific styles */
        .admin-header {
            background-color: var(--dark);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 5px solid var(--accent);
        }
        
        .admin-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .admin-stat-card {
            background-color: var(--dark-blue-light);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .admin-stat-card:hover {
            transform: translateY(-5px);
        }
        
        .admin-stat-card i {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .admin-stat-card.uploaded i {
            color: var(--primary);
        }
        
        .admin-stat-card.pending i {
            color: var(--warning);
        }
        
        .admin-stat-card.expired i {
            color: var(--danger);
        }
        
        .admin-stat-card.verified i {
            color: var(--success);
        }
        
        .password-protect {
            max-width: 400px;
            margin: 100px auto;
            padding: 40px;
            background-color: var(--dark-blue-light);
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .password-protect input {
            margin-bottom: 20px;
        }
        
        .logout-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
        }
        
        .edit-btn {
            background-color: rgba(252, 209, 22, 0.2);
            color: var(--accent);
            border: 1px solid rgba(252, 209, 22, 0.3);
        }
        
        .edit-btn:hover {
            background-color: rgba(252, 209, 22, 0.3);
        }
    </style>
</head>
<body>
    <!-- Admin Login Section (initially visible) -->
    <div id="loginSection" class="password-protect">
        <h2><i class="fas fa-lock"></i> Admin Access</h2>
        <p style="margin-bottom: 20px; color: var(--text-muted);">Enter admin password to access the management panel</p>
        <input type="password" id="adminPassword" placeholder="Enter admin password" style="width: 100%;">
        <button id="loginBtn" class="btn" style="width: 100%;">
            <i class="fas fa-sign-in-alt"></i> Login
        </button>
        <p style="margin-top: 20px; font-size: 0.9rem; color: var(--text-muted);">
            <i class="fas fa-info-circle"></i> Default password: admin123
        </p>
    </div>
    
    <!-- Admin Panel (initially hidden) -->
    <div id="adminPanel" style="display: none;">
        <!-- Header & Navigation -->
        <header>
            <div class="container header-container">
                <a href="index.html" class="logo">
                    <i class="fas fa-laptop-code logo-icon"></i>
                    <span>Admin Panel <span style="color: var(--accent);">Certificates</span></span>
                </a>
                
                <nav>
                    <ul>
                        <li><a href="index.html">Portfolio</a></li>
                        <li><a href="certificates.html">View Certificates</a></li>
                        <li><a href="admin.html" class="active">Admin Panel</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <main style="padding-top: 100px;">
            <div class="container">
                <!-- Admin Header -->
                <div class="admin-header">
                    <h1><i class="fas fa-cogs"></i> Certificates Management</h1>
                    <p>Manage your certificates portfolio - add, edit, or delete certificates</p>
                </div>
                
                <!-- Admin Actions -->
                <div class="admin-actions">
                    <button class="btn" onclick="toggleUploadSection()">
                        <i class="fas fa-plus"></i> Add New Certificate
                    </button>
                    <button class="btn btn-accent" onclick="exportCertificates()">
                        <i class="fas fa-download"></i> Export Data
                    </button>
                    <button class="btn btn-red" onclick="clearAllCertificates()">
                        <i class="fas fa-trash"></i> Clear All
                    </button>
                </div>
                
                <!-- Admin Statistics -->
                <div class="admin-stats">
                    <div class="admin-stat-card uploaded">
                        <i class="fas fa-certificate"></i>
                        <div class="stat-number" id="adminTotalCertificates">0</div>
                        <div class="stat-label">Total Certificates</div>
                    </div>
                    <div class="admin-stat-card pending">
                        <i class="fas fa-clock"></i>
                        <div class="stat-number" id="adminPending">0</div>
                        <div class="stat-label">Pending Verification</div>
                    </div>
                    <div class="admin-stat-card expired">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div class="stat-number" id="adminExpired">0</div>
                        <div class="stat-label">Expired/Expiring</div>
                    </div>
                    <div class="admin-stat-card verified">
                        <i class="fas fa-check-circle"></i>
                        <div class="stat-number" id="adminVerified">0</div>
                        <div class="stat-label">Verified</div>
                    </div>
                </div>
                
                <!-- Upload New Certificate Section -->
                <section class="upload-section" id="uploadSection" style="display: none;">
                    <div class="upload-container">
                        <h2 style="text-align: center; margin-bottom: 30px;">
                            <i class="fas fa-cloud-upload-alt"></i> Upload New Certificate
                        </h2>
                        
                        <form id="certificateForm" class="upload-form">
                            <div class="form-group">
                                <label for="certificateName">Certificate Name *</label>
                                <input type="text" id="certificateName" placeholder="e.g., Introduction to Modern AI" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="issuer">Issuing Organization *</label>
                                <input type="text" id="issuer" placeholder="e.g., Cisco Networking Academy" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="issueDate">Issue Date *</label>
                                <input type="date" id="issueDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="expiryDate">Expiry Date (if applicable)</label>
                                <input type="date" id="expiryDate">
                            </div>
                            
                            <div class="form-group">
                                <label for="certificateType">Certificate Type *</label>
                                <select id="certificateType" required>
                                    <option value="">Select type</option>
                                    <option value="certificate">Course Certificate</option>
                                    <option value="badge">Digital Badge</option>
                                    <option value="achievement">Module Achievement</option>
                                    <option value="professional">Professional Certification</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="credentialId">Credential ID</label>
                                <input type="text" id="credentialId" placeholder="e.g., CISCO-2026-AI001">
                            </div>
                            
                            <div class="form-group full-width">
                                <label for="description">Description</label>
                                <textarea id="description" placeholder="Brief description of what you learned or achieved..."></textarea>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Certificate File *</label>
                                <div class="file-upload">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload certificate image or PDF</p>
                                    <span>Supports: JPG, PNG, PDF (Max: 5MB)</span>
                                    <input type="file" id="certificateFile" accept=".jpg,.jpeg,.png,.pdf" required>
                                </div>
                                <div id="fileName" style="margin-top: 10px; color: var(--text-muted); font-size: 0.9rem;"></div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="reset" class="btn btn-red">Clear Form</button>
                                <button type="submit" class="btn">
                                    <i class="fas fa-upload"></i> Upload Certificate
                                </button>
                            </div>
                        </form>
                    </div>
                </section>
                
                <!-- Filters & Search -->
                <div class="filters">
                    <div class="filter-group">
                        <button class="filter-btn active" data-filter="all">All Certificates</button>
                        <button class="filter-btn" data-filter="certificate">Certificates</button>
                        <button class="filter-btn" data-filter="badge">Badges</button>
                        <button class="filter-btn" data-filter="achievement">Achievements</button>
                        <button class="filter-btn" data-filter="professional">Professional</button>
                    </div>
                    
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Search certificates...">
                    </div>
                </div>
                
                <!-- Certificates Gallery with Edit/Delete options -->
                <div id="certificatesGallery" class="certificates-grid">
                    <div class="empty-state">
                        <i class="fas fa-certificate"></i>
                        <h3>No Certificates Yet</h3>
                        <p>Start by adding your first certificate using the "Add New Certificate" button above.</p>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Certificate Modal -->
        <div class="modal" id="certificateModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">Certificate Details</h3>
                    <button class="modal-close" id="modalClose">&times;</button>
                </div>
                <div class="modal-body">
                    <img id="modalImage" src="" alt="Certificate Preview" class="modal-img">
                    <div id="modalDetails"></div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="footer-content">
                    <div class="footer-about">
                        <div class="footer-logo">Admin Panel <span>Certificates</span></div>
                        <p>Certificate management system for Daka Felix's portfolio website.</p>
                    </div>
                    <div class="footer-links">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href="index.html">Portfolio Home</a></li>
                            <li><a href="certificates.html">View Certificates</a></li>
                            <li><a href="admin.html">Admin Panel</a></li>
                        </ul>
                    </div>
                    <div class="footer-social">
                        <h4>System</h4>
                        <div style="color: var(--text-muted);">
                            <p><i class="fas fa-user-shield"></i> Admin Mode</p>
                            <button class="btn btn-sm btn-red" onclick="logoutAdmin()">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                    </div>
                </div>
                <div class="copyright">
                    <p>&copy; 2025 Daka Felix (Tech Guy). Admin Panel v1.0</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Admin authentication
        const ADMIN_PASSWORD = "admin123"; // Change this to a secure password
        let isAdminLoggedIn = false;
        
        // Check if admin is already logged in
        if (localStorage.getItem('adminLoggedIn') === 'true') {
            isAdminLoggedIn = true;
            showAdminPanel();
        }
        
        // Login functionality
        document.getElementById('loginBtn').addEventListener('click', function() {
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                isAdminLoggedIn = true;
                localStorage.setItem('adminLoggedIn', 'true');
                showAdminPanel();
                showMessage('Admin login successful!', 'success');
            } else {
                showMessage('Invalid password!', 'error');
                document.getElementById('adminPassword').value = '';
            }
        });
        
        // Show admin panel
        function showAdminPanel() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            loadCertificates();
            updateAdminStatistics();
        }
        
        // Logout admin
        function logoutAdmin() {
            if (confirm('Are you sure you want to logout?')) {
                isAdminLoggedIn = false;
                localStorage.removeItem('adminLoggedIn');
                location.reload();
            }
        }
        
        // Certificate management functions
        function loadCertificates() {
            return JSON.parse(localStorage.getItem('certificates')) || [];
        }
        
        function saveCertificates(certificates) {
            localStorage.setItem('certificates', JSON.stringify(certificates));
        }
        
        function updateAdminStatistics() {
            const certificates = loadCertificates();
            const now = new Date();
            
            const total = certificates.length;
            const pending = certificates.filter(cert => !cert.verified).length;
            const verified = certificates.filter(cert => cert.verified).length;
            
            const expired = certificates.filter(cert => {
                if (!cert.expiryDate) return false;
                const expiryDate = new Date(cert.expiryDate);
                return expiryDate < now;
            }).length;
            
            document.getElementById('adminTotalCertificates').textContent = total;
            document.getElementById('adminPending').textContent = pending;
            document.getElementById('adminVerified').textContent = verified;
            document.getElementById('adminExpired').textContent = expired;
        }
        
        function toggleUploadSection() {
            const uploadSection = document.getElementById('uploadSection');
            uploadSection.style.display = uploadSection.style.display === 'none' ? 'block' : 'none';
            
            if (uploadSection.style.display === 'block') {
                uploadSection.scrollIntoView({ behavior: 'smooth' });
            }
        }
        
        // Render certificates with edit/delete options
        function renderCertificates(filter = 'all', search = '') {
            const certificates = loadCertificates();
            const certificatesGallery = document.getElementById('certificatesGallery');
            certificatesGallery.innerHTML = '';
            
            let filteredCertificates = certificates;
            
            // Apply filter
            if (filter !== 'all') {
                filteredCertificates = certificates.filter(cert => cert.type === filter);
            }
            
            // Apply search
            if (search) {
                const searchTerm = search.toLowerCase();
                filteredCertificates = filteredCertificates.filter(cert => 
                    cert.name.toLowerCase().includes(searchTerm) ||
                    cert.issuer.toLowerCase().includes(searchTerm) ||
                    (cert.description && cert.description.toLowerCase().includes(searchTerm))
                );
            }
            
            // Display certificates or empty state
            if (filteredCertificates.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                emptyState.innerHTML = `
                    <i class="fas fa-search"></i>
                    <h3>No Certificates Found</h3>
                    <p>Try adjusting your search or filter to find what you're looking for.</p>
                `;
                certificatesGallery.appendChild(emptyState);
                return;
            }
            
            // Sort by date (newest first)
            filteredCertificates.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Create certificate cards with admin actions
            filteredCertificates.forEach(cert => {
                const card = document.createElement('div');
                card.className = 'certificate-card';
                card.dataset.id = cert.id;
                
                // Determine badge class based on type
                let badgeClass = 'certificate-badge';
                let badgeText = 'Certificate';
                
                switch(cert.type) {
                    case 'badge':
                        badgeClass += ' badge';
                        badgeText = 'Digital Badge';
                        break;
                    case 'achievement':
                        badgeClass += ' achievement';
                        badgeText = 'Achievement';
                        break;
                    case 'professional':
                        badgeClass += ' course';
                        badgeText = 'Professional';
                        break;
                    default:
                        badgeClass += ' course';
                }
                
                // Add verified badge if applicable
                const verifiedBadge = cert.verified ? 
                    '<span class="certificate-badge achievement" style="margin-left: 5px;"><i class="fas fa-check"></i> Verified</span>' : '';
                
                card.innerHTML = `
                    <img src="${cert.fileName || 'default-certificate.jpg'}" alt="${cert.name}" class="certificate-img" onerror="this.src='default-certificate.jpg'">
                    <div class="certificate-content">
                        <div>
                            <span class="${badgeClass}">${badgeText}</span>
                            ${verifiedBadge}
                        </div>
                        <h3 class="certificate-title">${cert.name}</h3>
                        <div class="certificate-issuer">
                            <i class="fas fa-building"></i>
                            <span>${cert.issuer}</span>
                        </div>
                        <div class="certificate-meta">
                            <span><i class="far fa-calendar"></i> ${formatDate(cert.date)}</span>
                            ${cert.expiryDate ? `<span><i class="fas fa-hourglass-end"></i> ${isExpired(cert.expiryDate) ? 'Expired' : 'Expires'}: ${formatDate(cert.expiryDate)}</span>` : ''}
                        </div>
                        <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 15px;">
                            ${cert.description || 'No description provided.'}
                        </p>
                        ${cert.credentialId ? `<div style="font-size: 0.8rem; color: var(--primary); margin-bottom: 10px;">
                            <i class="fas fa-id-card"></i> ID: ${cert.credentialId}
                        </div>` : ''}
                        <div class="certificate-actions">
                            <button class="action-btn view-btn" onclick="viewCertificate(${cert.id})">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="action-btn edit-btn" onclick="editCertificate(${cert.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="action-btn delete-btn" onclick="deleteCertificate(${cert.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                `;
                
                certificatesGallery.appendChild(card);
            });
        }
        
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }
        
        function isExpired(dateString) {
            return new Date(dateString) < new Date();
        }
        
        // Edit certificate
        function editCertificate(id) {
            const certificates = loadCertificates();
            const cert = certificates.find(c => c.id === id);
            if (!cert) return;
            
            // Populate form with certificate data
            document.getElementById('certificateName').value = cert.name;
            document.getElementById('issuer').value = cert.
